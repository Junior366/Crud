package br.itb.projeto.CentroArtesMarciais.service;

import java.util.List;

import org.apache.el.stream.Optional;
import org.springframework.stereotype.Service;

import br.itb.projeto.CentroArtesMarciais.model.entity.Membro;
import br.itb.projeto.CentroArtesMarciais.model.entity.MembroTurma;
import br.itb.projeto.CentroArtesMarciais.model.repository.MembroTurmaRepository;
import jakarta.transaction.Transactional;

@Service
public class MembroTurmaService {
	private MembroTurmaRepository membroTurmaRepository;

	public MembroTurmaService(MembroTurmaRepository membroTurmaRepository) {
		super();
		this.membroTurmaRepository = membroTurmaRepository;
	}
	public List<MembroTurma> findAll() {
		List<MembroTurma> MembroTurmas = membroTurmaRepository.findAll();

		return MembroTurmas;
	}

	public MembroTurma findById(long id) {
		MembroTurma membroTurma = membroTurmaRepository.findById(id).orElseThrow();

		return membroTurma;
	}

	
	@Transactional
	public Membro create(Membro membroTurma) {
		membroTurma.setStatusMembro("ATIVO");
		return membroTurmaRepository.save(membroTurma);
}
	@Transactional
	public Membro inativar(long id) {
		Optional<Membro> _membro = 
				membroRepository.findById(id);
		
		if (_membro.isPresent()) {
			Membro membroAtualizada = _membro.get();
			membroAtualizada.setStatusMembro("INATIVO");
			
			return membroRepository.save(membroAtualizada);
		}
		return null;
	}
	
	@Transactional
	public Membro reativar(long id) {
		Optional<Membro> _membro = 
				membroRepository.findById(id);
		
		if (_membro.isPresent()) {
			Membro membroAtualizado = _membro.get();
			membroAtualizado.setStatusMembro("ATIVO");
			
			return membroRepository.save(membroAtualizado);
		}
		return null;
 }
}
}
